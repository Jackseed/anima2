<button mat-icon-button id="close-button" (click)="close()">
  <mat-icon id="close-icon" svgIcon="close"></mat-icon>
</button>
<!---------------- SPECIES LIST -------------->
<main fxFlexFill fxLayout="column" fxLayoutAlign="start center">
  <section
    fxFlex="68"
    fxFlexFill
    fxLayout="column"
    fxLayoutAlign="start center"
    fxLayoutGap="12px"
    class="margin-top"
  >
    <!---------------- SPECIES -------------->
    <article
      *ngFor="let species of data.species; index as i"
      fxFlex="25"
      fxLayout="row"
      fxLayoutAlign="center center"
    >
      <!---------------- SPECIES ICON -------------->
      <div class="species relative">
        <button
          fxFlexFill
          mat-icon-button
          (click)="activate('species', i)"
          [disabled]="data.listType === 'passive'"
        >
          <mat-icon
            fxFlexFill
            svgIcon="hex"
            style="--primary-color: {{
              getSpeciesColors(species, 'primary')
            }}; --secondary-color: {{ getSpeciesColors(species, 'secondary') }}"
          ></mat-icon>
          <mat-icon
            id="species-icon"
            [svgIcon]="species.abilityIds[0]"
          ></mat-icon>
        </button>
        <div class="absolute circle" fxLayoutAlign="center center">
          <div class="figures">{{ getSpeciesCount(species) }}</div>
        </div>
      </div>
      <!---------------- SPECIES ABILITIES -------------->
      <div
        class="box"
        fxLayout="row"
        fxLayoutAlign="space-around center"
        fxFlex="60"
      >
        <button
          *ngFor="let ability of abilities; let i = index"
          mat-icon-button
          fxFlex="22"
          class="abilities"
          (click)="activate('ability', i)"
        >
          <div *ngIf="ability !== active">
            <mat-icon [svgIcon]="ability.icon"></mat-icon>
          </div>
          <div *ngIf="ability === active">
            <mat-icon [svgIcon]="ability.activeIcon"></mat-icon>
          </div>
        </button>
      </div>
    </article>
  </section>
  <aside
    fxFlex="32"
    fxFlexFill
    [ngClass]="{ 'no-padding-width': data.listType === 'passive' }"
  >
    <!---------------------- DEFINITION - ACTIVE ABILITY ONLY ---------------------->
    <div
      *ngIf="active.type! === 'ability'; else specie"
      fxLayout="column"
      fxLayoutAlign="center center"
      fxFlexFill
    >
      <h3
        fxFlexLayoutGap="10"
        fxFlex="20"
        fxFlexFill
        fxLayoutAlign="center center"
      >
        <mat-icon id="title-icon" [svgIcon]="active.icon"></mat-icon>
      </h3>
      <textarea fxFlex readonly wrap="hard" rows="3" cols="25">{{
        active.definition
      }}</textarea>
    </div>
    <!---------------------- DEFINITION - ACTIVE SPECIE ONLY ---------------------->
    <ng-template #specie>
      <div
        *ngIf="active.type! === 'specie'"
        fxLayout="column"
        fxLayoutAlign="center center"
        fxFlexFill
      >
        <h3
          fxFlexLayoutGap="10"
          fxFlex="40"
          fxFlexFill
          fxLayoutAlign="center start"
        >
          Assimiler cette esp√®ce ?
        </h3>
        <button mat-icon-button id="validate-button" (click)="validate()">
          <mat-icon id="validate-icon" svgIcon="validate"></mat-icon>
        </button>
      </div>
    </ng-template>
  </aside>
</main>
